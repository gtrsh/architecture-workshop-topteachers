# HW-01

## EventStorming

https://app.holst.so/share/b/c292b8e9-3d8b-48a5-bffc-f9d27a41b3f4

## Описание изменения связей

| Номер связи | Как связь сделана на текущий момент | Какая теперь будет связь | Номера проблем бизнеса, которые потенциально решаются | Почему связь необходимо изменить |
| ----------- | ----------------------------------- | ------------------------ | ----------------------------------------------------- | -------------------------------- |
| COMM-010] [COMM-020] [COMM-030] [COMM-090] | HTTP-вызов | Асинхронное событие | [Problem-090] [Problem-060] [Problem-010] | Изменил связь между сервисами на асинхронное сообщение из кафки теперь данные о менеджерах и заданиях получаем из сообщения кафки |
| [COMM-040] [COMM-050] [COMM-060] | HTTP-вызов/Асинхронное событие | Асинхронное событие | [Problem-090] [Problem-080] [Problem-070] [Problem-060] | Изменил связь между сервисами на асинхронное сообщение из кафки теперь данные о менеджерах и выполненных/проваленных заданиях получаем из сообщения кафки |
| [COMM-070] [COMM-080] | HTTP-вызов | Асинхронное событие |[Problem-090] [Problem-080] [Problem-040] [Problem-030] | Изменил связь между сервисами на асинхронное сообщение из кафки теперь данные о менеджерах и выполненных/проваленных заданиях получаем из сообщения кафки |

## Текущие связи

| Номер связи | Название связи | Зачем связь нужна | Как реализована коммуникация | Откуда, куда, как часто |
| ----------- | -------------- | ----------------- | ---------------------------- | ----------------------- |
| [COMM-010] | Получение информации о менеджере | Получать информацию о менеджерах | HTTP-вызов | Из сервиса найма запрос в сервис менеджмента заданий |
| [COMM-020] | Получение информации о задании | Получать информацию о задании, чтобы его использовать в бизнес-логике сервиса найма. UPDATED: задание запрашивается каждый раз по новому. Причем сервис найма получает уже назначенные задания | HTTP-вызов | Из сервиса найма синхронный запрос в сервис менеджмента. Каждый раз, когда нужно получить информацию об уроке |
| [COMM-030] | Назначение менеджера на переделку задания | Запускать процесс поиска менеджера, который переделает слишком лёгкое задание | HTTP-вызов | Из сервиса найма синхронный запрос в сервис менеджмента. Каждый раз, когда задание выполнили правильно 10 раз подряд |
| [COMM-040] | Зачисление бонусов на счёт менеджера | Зачислять бонусы на счёт менеджера, чьё задание правильно выполнил кандидат в учителя | HTTP-вызов | Из сервиса найма запрос в сервис бонусов |
| [COMM-050] | Списание средств со счёта менеджера | Списывать бонусы со счёта менеджера, чьё задание неправильно выполнил кандидат в учителя | HTTP-вызов | Из сервиса найма запрос в сервис бонусов |
| [COMM-060] | Отправка события `TaskRating` | Сообщать актуальный рейтинг задачи | Асинхронная отправка события через kafka | Из сервиса найма  событие в сервис бонусов Название топика, куда продьюсится событие: task |
| [COMM-070] | Получение информации о менеджере | Получить информацию о менеджерах | HTTP-вызов | Из сервиса бонусов  запрос в сервис менеджмента заданий |
| [COMM-080] | Зачисление средств на счёт менеджера | Зачислить бонусы на счёт менеджеру, который сделает новое задание | HTTP-вызов | Из сервиса менеджмента заданий запрос в сервис бонусов |
| [COMM-090] | Получение списка кандидатов в учителя, которым будут назначаться задачи | Для выбора задач для кандидатов, необходимо получить список кандидатов, который реализуется этой связью | HTTP-вызов | Из сервиса найма синхронный запрос в сервис менеджмента. Каждый раз, когда надо назначить задачи кандидатам в учителя |
